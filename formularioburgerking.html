<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <script type="text/javascript" src="js/jquery/jquery-1.7.1.min.js"></script>
  <script type="text/javascript" src="js/jquery/jquery-ui-1.8.17.custom.min.js"></script>
  <script type="text/javascript" src="jspdf.js"></script>
  <script type="text/javascript" src="jspdf.plugin.addimage.js"></script>
  <script type="text/javascript" src="jspdf.plugin.standard_fonts_metrics.js"></script>
  <script type="text/javascript" src="jspdf.plugin.split_text_to_size.js"></script>
  <script type="text/javascript" src="jspdf.plugin.from_html.js"></script>
  <link rel="stylesheet" type="text/css" href="estilosformulariobk.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Fugaz+One&family=Ultra&display=swap" rel="stylesheet">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Shrikhand&display=swap" rel="stylesheet">
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Burger King</title>
    <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Burger_King_2020.svg/1200px-Burger_King_2020.svg.png" type="image/x-icon">
</head>
<body>
	<header>
		<button class="boton">Regístrate</button>
	<nav>
		<ul>
			<li>Menú</li>
			<li><a href="https://alfonsomrnt18.github.io/Progra_web1/sucursales.html" target="_blank">Sucursales</a></li>
            <li>Promociones</li>
            <li>Contacto</li>
		</ul>
	</nav>
		<button class="iniciarsesion">Iniciar Sesión</button>
	</header>
	</br>
  <h2>Encuesta de Satisfacción - Burger King</h2>

  <label>Nombres:
    <input type="text" id="nombres" required>
  </label><br>

  <label>Apellidos:
    <input type="text" id="apellidos" required>
  </label><br>

  <label>Correo electrónico:
    <input type="email" id="correo" required>
  </label><br>

  <label>Calidad de los productos (1-5):
    <select id="productos">
      <option value="0">Seleccione una opción</option>
      <option value="1">1 - Muy mala</option>
      <option value="2">2 - Mala</option>
      <option value="3">3 - Regular</option>
      <option value="4">4 - Buena</option>
      <option value="5">5 - Excelente</option>
    </select>
  </label><br>

  <label>Calidad del servicio (1-5):
    <select id="servicio">
      <option value="0">Seleccione una opción</option>
      <option value="1">1 - Muy malo</option>
      <option value="2">2 - Malo</option>
      <option value="3">3 - Regular</option>
      <option value="4">4 - Bueno</option>
      <option value="5">5 - Excelente</option>
    </select>
  </label><br>

  <label>Atención de los empleados (1-5):
    <select id="empleados">
      <option value="0">Seleccione una opción</option>
      <option value="1">1 - Muy mala</option>
      <option value="2">2 - Mala</option>
      <option value="3">3 - Regular</option>
      <option value="4">4 - Buena</option>
      <option value="5">5 - Excelente</option>
    </select>
  </label><br>

  <label>Quejas y/o sugerencias:
    <textarea id="comentarios" rows="4" placeholder="Escribe aquí tus comentarios..."></textarea>
  </label><br><br>

  <div class="resultado" id="mensaje" style="font-weight: bold;"></div><br>

  <div class="botones">
    <button onclick="evaluar()">Enviar Evaluación</button>
    <button onclick="generarPDF()">Generar PDF</button>
    <button onclick="reiniciarFormulario()">Reiniciar</button>
  </div>

  <br>
  <iframe src="" name="contenedor" width="700" height="900" frameborder="0"></iframe>

  <script>
    function evaluar() {
      const nombres = document.getElementById('nombres').value.trim();
      const apellidos = document.getElementById('apellidos').value.trim();
      const correo = document.getElementById('correo').value;
      const prod = parseInt(document.getElementById('productos').value);
      const serv = parseInt(document.getElementById('servicio').value);
      const empl = parseInt(document.getElementById('empleados').value);

      if (!nombres || !apellidos || !correo || prod === 0 || serv === 0 || empl === 0) {
        alert("Por favor completa todos los campos antes de enviar.");
        return;
      }

      const total = prod + serv + empl;
      let mensaje = "";

      if (total <= 6) {
        mensaje = "Lamentamos que tu experiencia no haya sido satisfactoria. Tomaremos en cuenta tus comentarios.";
      } else if (total <= 10) {
        mensaje = "Gracias por tu retroalimentación. Seguiremos mejorando.";
      } else {
        mensaje = "¡Gracias por tu excelente evaluación! Nos alegra que hayas tenido una gran experiencia.";
      }

      document.getElementById('mensaje').textContent = mensaje;
    }

    function generarPDF() {
      const nombres = document.getElementById('nombres').value.trim();
      const apellidos = document.getElementById('apellidos').value.trim();
      const correo = document.getElementById('correo').value;
      const prod = document.getElementById('productos').options[document.getElementById('productos').selectedIndex].text;
      const serv = document.getElementById('servicio').options[document.getElementById('servicio').selectedIndex].text;
      const empl = document.getElementById('empleados').options[document.getElementById('empleados').selectedIndex].text;
      const comentarios = document.getElementById('comentarios').value;
      const mensaje = document.getElementById('mensaje').textContent;

      if (!nombres || !apellidos || !correo || prod === "Seleccione una opción") {
        alert("Debes completar y enviar la evaluación antes de generar el PDF.");
        return;
      }

      const doc = new jsPDF();
      doc.setFontSize(12);
      doc.text("Comprobante de Encuesta - Burger King", 20, 20);
      doc.text(`Nombre: ${nombres} ${apellidos}`, 20, 35);
      doc.text(`Correo: ${correo}`, 20, 45);
      doc.text(`Calidad de productos: ${prod}`, 20, 55);
      doc.text(`Calidad del servicio: ${serv}`, 20, 65);
      doc.text(`Atención de empleados: ${empl}`, 20, 75);
      doc.text("Comentarios:", 20, 85);
      doc.text(comentarios || "(Sin comentarios)", 20, 95, { maxWidth: 170 });
      doc.text("Resultado:", 20, 125);
      doc.text(mensaje, 20, 135, { maxWidth: 170 });

      const strimg = doc.output('datauristring');
      $('iframe').attr('src', strimg); // mostrar en el iframe
    }

    function reiniciarFormulario() {
      document.getElementById('nombres').value = '';
      document.getElementById('apellidos').value = '';
      document.getElementById('correo').value = '';
      document.getElementById('productos').selectedIndex = 0;
      document.getElementById('servicio').selectedIndex = 0;
      document.getElementById('empleados').selectedIndex = 0;
      document.getElementById('comentarios').value = '';
      document.getElementById('mensaje').textContent = '';
      document.querySelector('iframe').src = '';
    }
  </script>
</body>
</html>
